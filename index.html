<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>San ValentÃ­n â¤ï¸</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{
  background:linear-gradient(135deg,#ff758c,#ff7eb3);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  color:white;
  overflow-x:hidden;
  transition:0.5s;
}

body.night{
  background:linear-gradient(135deg,#141e30,#243b55);
  color:#ffd1dc;
}

.container{padding:20px;max-width:700px;}

button{
  padding:10px 18px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  margin:6px;
  font-weight:bold;
  transition:0.3s;
}

#yesBtn{background:white;color:#ff4d6d;}
#noBtn{background:#ff4d6d;color:white;position:absolute;left:55%;top:70%;}

.hidden{display:none;}

.icon-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(80px,1fr));
  gap:14px;
  margin-top:20px;
}

.icon{
  font-size:40px;
  cursor:pointer;
  transition:0.3s;
}

.icon:hover{transform:scale(1.25);}

/* FIREWORKS */
.firework{
  position:fixed;
  width:5px;
  height:5px;
  border-radius:50%;
  animation: explode 1s ease-out forwards;
  z-index:9999;
}

@keyframes explode {
  0% {opacity:1; transform:translate(0,0);}
  100% {opacity:0; transform:translate(var(--x),var(--y));}
}

.modal{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.6);
  display:flex;
  justify-content:center;
  align-items:center;
  visibility:hidden;
  opacity:0;
  transition:0.3s;
  padding:20px;
  z-index:9998;
}
.modal.show{visibility:visible;opacity:1;}

.modal-content{
  background:white;
  color:#ff4d6d;
  padding:25px;
  border-radius:20px;
  max-width:400px;
  width:100%;
}
body.night .modal-content{
  background:#243b55;
  color:#ffd1dc;
}

input{
  padding:8px;
  width:100%;
  margin:10px 0;
  border-radius:10px;
  border:1px solid #ccc;
}

/* Corazones */
.heart{
  position:fixed;
  bottom:-10px;
  animation:floatUp linear infinite;
  cursor:pointer;
  font-size:25px;
  z-index:1;
}

@keyframes floatUp{
  0%{transform:translateY(0);opacity:1;}
  100%{transform:translateY(-110vh);opacity:0;}
}

.toggle{
  position:fixed;
  top:12px;
  right:12px;
  cursor:pointer;
  font-size:28px;
  z-index:10000;
}

/* PUNTOS GLOBAL */
#pointsDisplay{
  font-size:20px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="toggle" id="nightToggle">ğŸŒ“</div>

<!-- AUDIO (sin botÃ³n, solo inicia al tocar "SÃ­") -->
<audio id="bgMusic" loop preload="auto">
  <source src="music/cancion.mp3" type="audio/mpeg">
</audio>

<div class="container" id="startPage">
  <h1>Maryuri Paola Rodriguez Guiza â¤ï¸<br>Â¿Quieres ser mi San ValentÃ­n?</h1>
  <button id="yesBtn">SÃ­ ğŸ’–</button>
  <button id="noBtn">No ğŸ˜¢</button>
</div>

<div class="container hidden" id="mainPage">
  <h2>Gracias por aceptar mi amor â¤ï¸</h2>
  <div id="pointsDisplay">Puntos: 0</div>

  <div class="icon-grid">
    <div class="icon" onclick="openCalculator()">ğŸ§®</div>
    <div class="icon" onclick="openContract()">ğŸ“œ</div>
    <div class="icon" onclick="game1()">ğŸ’˜</div>
    <div class="icon" onclick="game2()">ğŸ</div>
    <div class="icon" onclick="game3()">ğŸ§©</div>
    <div class="icon" onclick="game4()">ğŸ²</div>
    <div class="icon" onclick="game5()">â“</div>
    <div class="icon" onclick="game6()">ğŸ”¢</div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="modal-content" id="modalContent"></div>
</div>

<script>
/* ===== Referencias DOM seguras ===== */
const startPage = document.getElementById("startPage");
const mainPage = document.getElementById("mainPage");
const pointsDisplay = document.getElementById("pointsDisplay");
const modal = document.getElementById("modal");
const modalContent = document.getElementById("modalContent");
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const nightToggle = document.getElementById("nightToggle");

/* ===== MÃºsica de fondo suave ===== */
const music = document.getElementById("bgMusic");
let musicStarted = false;

function startBackgroundMusic(){
  if(musicStarted) return;
  music.volume = 0.18;   // ğŸ‘ˆ volumen suave (ajÃºstalo 0.10 - 0.30)
  music.play().catch(()=>{ /* si el navegador bloquea, no hacemos nada */ });
  musicStarted = true;
}

/* ===== ğŸŒ™ Dark mode ===== */
function toggleNight(){
  document.body.classList.toggle("night");
}
nightToggle.addEventListener("click", toggleNight);

/* ===== Puntos ===== */
let globalPoints = 0;
function addPoints(n){
  globalPoints += n;
  pointsDisplay.innerText = "Puntos: " + globalPoints;
}

/* ===== Modal ===== */
function openModal(c){
  modalContent.innerHTML = c;
  modal.classList.add("show");
}
function closeModal(){
  modal.classList.remove("show");
  window.catchFloatingHeart = null; // limpia game1 si estaba activo
}
modal.addEventListener("click",(e)=>{ if(e.target === modal) closeModal(); });

/* ===== Corazones flotantes ===== */
function createHeart(){
  let h=document.createElement("div");
  h.className="heart";
  h.innerHTML="â¤ï¸";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(Math.random()*3+3)+"s";
  h.onclick=function(){ if(typeof window.catchFloatingHeart==="function") window.catchFloatingHeart(h); };
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
}
setInterval(createHeart,400);

/* ===== BotÃ³n NO se mueve ===== */
function moveNo(){
  noBtn.style.left=Math.random()*(window.innerWidth-100)+"px";
  noBtn.style.top=Math.random()*(window.innerHeight-50)+"px";
}
noBtn.addEventListener("mouseover",moveNo);
noBtn.addEventListener("touchstart",(e)=>{e.preventDefault();moveNo();});

/* ===== BotÃ³n SÃ (un toque entra + inicia mÃºsica) ===== */
yesBtn.addEventListener("click",()=>{
  startBackgroundMusic();
  startPage.classList.add("hidden");
  mainPage.classList.remove("hidden");
});

/* ===== ğŸ§® CALCULATOR ===== */
function openCalculator(){
  openModal(`
  <h3>Nuestra fecha ğŸ’•</h3>
  <input type="date" id="dateInput">
  <button onclick="checkDate()">Confirmar</button>
  <button onclick="closeModal()">Cerrar</button>
  `);
}
function checkDate(){
  let d=document.getElementById("dateInput").value;
  if(d==="2024-04-27"){
    addPoints(5);
    openModal(`<h3>Perfecto â¤ï¸</h3>
      <p>Â¡Gracias por hacerme el niÃ±o mas felix durante estos casi 2 aÃ±os, sin duda son el mas afortunado por tenerla conmigo, por compartr tantoss momentos increibles juntos, y espero que podamos seguir asi siempre en las buenas y malas pero juntos , la amo tres millones pecas! ğŸ’–</p>
      <button onclick="closeModal()">Cerrar</button>`);
  } else {
    openModal(`<p>IntÃ©ntalo otra vez amor ğŸ’•</p><button onclick="closeModal()">Cerrar</button>`);
  }
}

/* ===== ğŸ“œ CONTRACT + FIREWORKS ===== */
function openContract(){
  openModal(`
  <h3>Contrato Oficial ğŸ’•</h3>
  <p>Yo, Maryuri Paola Rodriguez Guiza prometo ser la San ValentÃ­n de Carlos todos los 14 de febrero por siempre â¤ï¸</p>
  <button onclick="sign()">Firmar ğŸ’–</button>
  <button onclick="closeModal()">Cerrar</button>
  `);
}
function sign(){
  closeModal();
  fireworks();
  openModal(`
  <h2>OFICIAL ğŸ’â¤ï¸</h2>
  <p>Te amo infinitamente ğŸ’•âœ¨</p>
  <button onclick="closeModal()">Cerrar</button>
  `);
  addPoints(10);
}
function fireworks(){
  for(let i=0;i<50;i++){
    let f=document.createElement("div");
    f.className="firework";
    f.style.top=window.innerHeight*0.5+"px";
    f.style.left=window.innerWidth*0.5+"px";
    f.style.setProperty('--x', (Math.random()-0.5)*500+"px");
    f.style.setProperty('--y', (Math.random()-0.5)*500+"px");
    f.style.background=`hsl(${Math.random()*360},100%,65%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  }
}

/* ===== ğŸ® GAMES ===== */

/* 1ï¸âƒ£ ATRAPA LOS CORAZONES */
function game1(){
  let score=0, goal=5;
  openModal(`<h3>Atrapa ${goal} â¤ï¸</h3><p id="cSc">0 / ${goal}</p><button onclick="closeModal()">Salir</button>`);
  window.catchFloatingHeart=function(h){
    score++;
    h.remove();
    const cSc = document.getElementById("cSc");
    if(cSc) cSc.innerText = score+" / "+goal;
    if(score>=goal){
      addPoints(8);
      openModal(`<h2>Â¡Ganado! â¤ï¸</h2><p>Â¡Eres increÃ­ble! ğŸ’–</p><button onclick="closeModal()">Cerrar</button>`);
    }
  };
}

/* 2ï¸âƒ£ DÃ“NDE ESTÃ EL CORAZÃ“N */
function game2(){
  let correct=Math.floor(Math.random()*3);
  openModal(`<h3>Â¿DÃ³nde estÃ¡ el â¤ï¸?</h3>
    <button onclick="pick(0)">ğŸ</button>
    <button onclick="pick(1)">ğŸ</button>
    <button onclick="pick(2)">ğŸ</button>
    <br><br><button onclick="closeModal()">Salir</button>
  `);
  window.pick=function(n){
    if(n===correct){
      addPoints(6);
      openModal(`<p>ğŸ’˜ Â¡Encontraste mi corazÃ³n! ğŸ’˜</p><button onclick="closeModal()">Cerrar</button>`);
    } else {
      openModal(`<p>Intenta otra vez ğŸ’•</p><button onclick="closeModal()">Cerrar</button>`);
    }
  };
}

/* 3ï¸âƒ£ DESCIFRA */
function game3(){
  let words=["amor","vida","beso","cielo","feliz"], solved=0;
  function newW(){
    let w=words[Math.floor(Math.random()*words.length)];
    let scr=w.split("").sort(()=>0.5-Math.random()).join("");
    openModal(`<h3>Descifra ğŸ’Œ</h3><p>${scr}</p>
      <input id="a" autocomplete="off">
      <button onclick="chk()">Enviar</button>
      <button onclick="closeModal()">Salir</button>
    `);
    window.chk=function(){
      const a = document.getElementById("a");
      if(a && a.value.toLowerCase()===w){
        solved++;
        addPoints(4);
        if(solved>=5){
          openModal(`<p>Â¡Felicidades! ğŸ’–</p><button onclick="closeModal()">Cerrar</button>`);
        } else newW();
      } else alert("Intenta otra vez ğŸ’•");
    };
  }
  newW();
}

/* 4ï¸âƒ£ DADO ROMÃNTICO */
function game4(){
  let msgs=["Hoy te gano un abrazo grande ğŸ’–","Un beso eterno para ti ğŸ˜˜","Cita improvisada esta noche ğŸ’•","Mimos todo el dÃ­a â¤ï¸","Eres mi casualidad favorita âœ¨","Futuro juntos brillante ğŸ’–"];
  let n=Math.floor(Math.random()*msgs.length);
  openModal(`<p>${msgs[n]}</p><button onclick="closeModal()">Cerrar</button>`);
  addPoints(3);
}

/* 5ï¸âƒ£ QUIZ DE NOSOTROS */
function game5(){
  openModal(`<p>Â¿Nuestro mes?</p>
    <button onclick="q1(true)">Abril</button>
    <button onclick="q1(false)">Junio</button>
    <br><br><button onclick="closeModal()">Salir</button>
  `);
  window.q1=function(c){
    if(!c){alert("No ğŸ˜…");return;}
    openModal(`<p>Â¿DÃ³nde nos enamoramos?</p>
      <button onclick="q2(true)">Colegio</button>
      <button onclick="q2(false)">GalerÃ­a</button>
      <br><br><button onclick="closeModal()">Salir</button>
    `);
  };
  window.q2=function(c){
    if(!c){alert("Casi ğŸ˜˜");return;}
    openModal(`<p>Primera cita romÃ¡ntica</p>
      <button onclick="q3(true)">Cine</button>
      <button onclick="q3(false)">GalerÃ­a</button>
      <br><br><button onclick="closeModal()">Salir</button>
    `);
  };
  window.q3=function(c){
    if(!c){alert("No ğŸ˜…");return;}
    openModal(`<p>Comida favorita</p>
      <button onclick="food()">Pizza</button>
      <button onclick="food()">Papitas fritas</button>
      <br><br><button onclick="closeModal()">Salir</button>
    `);
  };
  window.food=function(){
    addPoints(5);
    openModal(`<p>Gracias, ahora lo recordarÃ© ğŸ˜„ğŸ’–</p><button onclick="closeModal()">Cerrar</button>`);
  };
}

/* 6ï¸âƒ£ ADIVINA NÃšMERO */
function game6(){
  let num=Math.floor(Math.random()*10)+1;
  let btns="";
  for(let i=1;i<=10;i++){ btns+=`<button onclick="g(${i},${num})">${i}</button>`; }
  openModal(`<h3>Adivina ğŸ”¢</h3>${btns}<br><br><button onclick="closeModal()">Salir</button>`);
}
window.g=function(x,num){
  let msgs=["No es ese, pero te amo â¤ï¸","Intenta otra vez linda ğŸ’•","Casi ğŸ˜˜","Muy cerca ğŸ’—","Nooo ğŸ˜…","Ese no ğŸ™ˆ"];
  if(x===num){
    addPoints(7);
    openModal(`<p>Â¡Correcto! â¤ï¸âœ¨ Te amo muchÃ­simo ğŸ˜˜</p><button onclick="closeModal()">Cerrar</button>`);
  } else {
    openModal(`<p>${msgs[Math.floor(Math.random()*msgs.length)]}</p><button onclick="closeModal()">Intentar</button>`);
  }
};
</script>

</body>
</html>
